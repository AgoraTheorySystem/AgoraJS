<!DOCTYPE html>
<html lang="pt-pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/png" href="/assets/icon.png" />
  <link href="/assets/hamburguer.css" rel="stylesheet" />
  <script src="/traducao.js" type="module" defer></script>
  <script src="/MenuLateral.js" type="module" defer></script>
  <script src="/home/SuasAnalises/DetalhesPlanilha/Analises/dashboard/atualizacao.js" type="module" defer></script>

  <!-- Estilos -->
  <link href="formaragora.css" rel="stylesheet" />

  <!-- Bibliotecas Externas -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
  <link href="https://unpkg.com/vis-network/styles/vis-network.css" rel="stylesheet" />
  <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

  <!-- Scripts da Aplicação -->
  <script src="formaragora.js" type="module" defer></script>
  <script src="bolhas.js" type="module" defer></script>
  <script src="menu.js" type="module" defer></script>
  <link href="menu.css" rel="stylesheet" />
  <link href="bolhas.css" rel="stylesheet" />

  <title>Ágora - Formar Ágoras</title>
</head>
<body class="formaragora">
  <main>
    <!-- Banner de Identificação da Planilha -->
    <div class="top-barra-planilha">
      <div class="barra-conteudo card-banner">
        <div class="barra-logo">
          <img src="/assets/tipo_de_analise_agora.png" alt="Logo Ágora">
          <div class="titulo-site" data-translate="agora_methodologies">METODOLOGIAS DAS<br>ÁGORAS COGNITIVAS</div>
        </div>
        <div class="barra-planilha" id="nome-da-planilha"></div>
      </div>
    </div>

    <!-- Menu de Navegação Superior -->
    <div class="container">
      <div class="menu">
        <a class="menu_analises" id="link-analises" data-translate="analysis_menu">Menu Das Análises</a>
        <a id="link-dashboard"  href="./dashboard.html?planilha=" data-translate="dashboard">Dashboard</a>
        <a id="link-agora"      href="./agora.html?planilha=" data-translate="socioeconomic">Socioeconómico</a>
        <a id="link-evocacoes"  href="./evocacoes.html?planilha=" data-translate="evocations">Evocações</a>
        <a id="link-formar"     href="./formaragora.html?planilha=" data-translate="form_agoras">Formar Ágoras</a>
        <a id="link-mapa"       href="./mapa.html?planilha=" data-translate="map">Mapa</a>
      </div>
    </div>

    <!-- Painel de Controlo e Filtros -->
    <div class="planilha-main-container">
      <div id="menu_agoras">
        <!-- Seleção de Níveis -->
        <div class="control-group">
          <label><strong data-translate="form_agoras_level_label">NÍVEL DA ÁGORA</strong></label>
          <div id="niveisContainer" class="niveis-buttons"></div>
        </div>

        <!-- Tipo de Análise -->
        <div class="control-group">
          <label><strong data-translate="form_agoras_analysis_label">ANÁLISE</strong></label>
          <div class="radio-options">
            <label><input type="radio" name="analise" value="Socioeconômica" checked> <span data-translate="form_agoras_socioeconomic_radio">Socioeconómica</span></label>
            <label><input type="radio" name="analise" value="Conectividade"> <span data-translate="form_agoras_connectivity_radio">Conectividade</span></label>
          </div>
        </div>

        <!-- Filtros de Positividade e Categoria -->
        <div class="control-group">
          <label><strong>POSITIVIDADE</strong></label>
          <select id="filtroPositividade" class="custom-select">
            <option value="">Todas</option>
            <option value="POSITIVA">Positiva</option>
            <option value="NEUTRA">Neutra</option>
            <option value="NEGATIVA">Negativa</option>
          </select>
        </div>

        <div class="control-group">
          <label><strong>CATEGORIAS</strong></label>
          <select id="filtroCategorias" class="custom-select">
            <option value="">Todas as Categorias</option>
          </select>
        </div>

        <!-- Opção Extra para Conectividade -->
        <div class="control-group extra-opcao" id="extraOpcao" style="display: none;">
          <label><strong data-translate="form_agoras_words_per_level_label">QTD. DE PALAVRAS / NÍVEL</strong></label>
          <input type="number" id="valorConectividade" placeholder="Número de palavras">
        </div>

        <!-- Aspecto Analisado -->
        <div class="control-group">
          <label><strong data-translate="form_agoras_aspect_label">ASPECTO</strong></label>
          <div class="radio-options">
            <label><input type="radio" name="aspecto" value="Ego" checked> Ego</label>
            <label><input type="radio" name="aspecto" value="Alter"> Alter</label>
          </div>
        </div>

        <!-- Ação Principal -->
        <div class="rodar">
          <button class="btn-agora" onclick="rodarAnalise()">
            <img src="/assets/icon_play.png" alt="Play">
            <span class="btn-text" data-translate="form_agoras_run_button">FORMAR ÁGORA</span>
          </button>
        </div>
      </div>

      <!-- Container para as tabelas (renderizadas horizontalmente) -->
      <div id="planilhasContainer"></div>
    </div>

    <!-- Indicador de Carregamento -->
    <div id="loading" aria-live="polite" aria-busy="true" style="display: none;">
      <div class="loader-overlay">
        <div class="loader"></div>
      </div>
    </div>
  </main>
</body>
</html>